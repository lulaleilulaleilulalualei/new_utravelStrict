(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/commentList/commentList"],{"0e20":function(t,e,i){"use strict";i.r(e);var n=i("ab18"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},5243:function(t,e,i){"use strict";i.r(e);var n=i("528c"),a=i("0e20");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("7e04");var s=i("2877"),r=Object(s["a"])(a["default"],n["a"],n["b"],!1,null,"35d5d34a",null);e["default"]=r.exports},"528c":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"5b21":function(t,e,i){"use strict";(function(t){i("610e"),i("921b");n(i("66fd"));var e=n(i("5243"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},"7e04":function(t,e,i){"use strict";var n=i("b9d2"),a=i.n(n);a.a},ab18:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){return i.e("components/loadErr").then(i.bind(null,"0281"))},a=function(){return i.e("components/noMore").then(i.bind(null,"da1c"))},o={data:function(){return{navTitle:"点评",commentType:null,index:1,size:10,commentList:[],isLoadErr:!1,isMore:!0,id:null,type:"",tagArr:[]}},components:{loadErr:n,noMore:a},onLoad:function(t){this.id=t.id,this.commentType=t.type,this.getCommentTag(),this.getCommentData()},methods:{toSelectCommentTag:function(t){this.type==this.tagArr[t].tag_id?this.type="":this.type=this.tagArr[t].tag_id,this.isMore=!0,this.index=1,this.commentList=[],this.getCommentData()},toPreviewImg:function(e,i){var n=this;t.previewImage({current:n.commentList[e].imgs[i],urls:n.commentList[e].imgs})},getCommentTag:function(){var t=this;this.$api.ajax({url:"line"==this.commentType?this.$config.lineCommentTag:"",data:{rt_id:this.id}}).then(function(e){if(200==e.statusCode&&0==e.data.code){var i=e.data.data;t.tagArr=i}else t.$api.warnNotice(e.data.message)}).catch(function(t){})},toLoadMore:function(){this.isMore&&this.getCommentData()},getCommentData:function(){var e=this;1==this.index&&t.showLoading({title:"数据加载中",mask:!0}),this.$api.ajax({url:"line"==this.commentType?this.$config.lineComment:"",data:{index:this.index,size:this.size,type:this.type,rt_id:this.id}}).then(function(i){if(200==i.statusCode&&0==i.data.code){var n=i.data.data;n.map(function(t){t.picture_arr?t.imgs=t.picture_arr.split(","):t.imgs=[]}),n.length<e.size?(e.commentList=e.commentList.concat(n),e.isMore=!1):(e.commentList=e.commentList.concat(n),e.index++),setTimeout(function(){t.hideLoading()},500)}else 1==e.index?e.isLoadErr=!0:e.$api.warnNotice(i.data.message),t.hideLoading()}).catch(function(i){1==e.index?e.isLoadErr=!0:e.$api.warnNotice("列表加载失败"),t.hideLoading()})},toRelaodData:function(){this.isLoadErr=!1,this.isMore=!0,this.index=1,this.commentList=[],this.getCommentData()}}};e.default=o}).call(this,i("543d")["default"])},b9d2:function(t,e,i){}},[["5b21","common/runtime","common/vendor"]]]);