(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/lineList/lineList"],{"0137":function(e,t,a){"use strict";a.r(t);var i=a("52b5"),n=a("bf9f");for(var l in n)"default"!==l&&function(e){a.d(t,e,function(){return n[e]})}(l);a("d497");var s=a("2877"),r=Object(s["a"])(n["default"],i["a"],i["b"],!1,null,"12669730",null);t["default"]=r.exports},3268:function(e,t,a){"use strict";(function(e){a("610e"),a("921b");i(a("66fd"));var t=i(a("0137"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,a("543d")["createPage"])},4475:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){return a.e("components/quick-skeleton").then(a.bind(null,"48c5"))},n=function(){return a.e("components/noMore").then(a.bind(null,"da1c"))},l=function(){return a.e("components/loadErr").then(a.bind(null,"0281"))},s={data:function(){return{isShowSkeleton:!0,curFilter:"",lineTypeVal:"",lineType:[],recomFilterVal:"",recomFilter:[{name:"综合排序",value:""},{name:"销量 高 → 底",value:1},{name:"评分 高 → 底",value:2},{name:"价格 高 → 底",value:3},{name:"价格 底 → 高",value:4}],selectDayVal:"",selectDay:[{name:"全部天数",value:""},{name:"两天",value:2},{name:"三天",value:3},{name:"四天",value:4},{name:"五天",value:5},{name:"六天",value:6},{name:"七天及七天以上",value:7}],selectArea:[],areaPrtIdx:null,selectClrArea:null,selectAreaName:null,selectAreaId:"",area_type:"",keyword:"",isLoadErr:!1,isMore:!0,lineList:[{},{},{},{},{},{}],index:1,size:10}},components:{noMore:n,skeleton:i,loadErr:l},computed:{filterH:function(){var t=e.getSystemInfoSync(),a=0;return 1==this.curFilter?(a=100*this.lineType.length,a>540&&(a=540)):2==this.curFilter?(a=100*this.recomFilter.length,a>540&&(a=540)):3==this.curFilter?a=540:4==this.curFilter&&(a=100*this.selectDay.length,a>540&&(a=540)),t.windowWidth/750*a+"px"}},onLoad:function(e){var t=this;void 0!==e.areaid&&null!==e.areaid?this.selectAreaId=e.areaid:e.keyword&&(this.keyword=e.keyword),setTimeout(function(){t.getDataList(),t.toGetLineCdi()},100)},methods:{toSelectPrtArea:function(e){this.paramsBlank(),this.areaPrtIdx!=e?(this.areaPrtIdx=e,this.selectClrArea=null):(this.areaPrtIdx=null,this.selectAreaName=null,this.selectAreaId="",this.area_type="",this.getDataList())},toSelectClrArea:function(e){this.paramsBlank();var t=this.selectArea[this.areaPrtIdx].child_list[e];this.selectClrArea&&t.area_id==this.selectClrArea.area_id?(this.selectClrArea=null,this.selectAreaName=this.selectArea[this.areaPrtIdx].area_name,this.selectAreaId=this.selectArea[this.areaPrtIdx].area_id,this.area_type=1):(this.selectClrArea=t,this.selectAreaName=t.area_name,this.selectAreaId=t.area_id,this.curFilter="",this.area_type=0),this.getDataList()},selectFilterType:function(e){this.paramsBlank(),this.lineTypeVal=this.lineType[e].cate_id,this.curFilter="",this.getDataList()},selectFilterCom:function(e){this.paramsBlank(),this.recomFilterVal=this.recomFilter[e].value,this.curFilter="",this.getDataList()},selectFilterDay:function(e){this.paramsBlank(),this.selectDayVal=this.selectDay[e].value,this.curFilter="",this.getDataList()},filteValChange:function(e,t,a){var i="";return 1==a?t.map(function(t){t.cate_id==e&&(i=t.cate_name)}):t.map(function(t){t.value==e&&(i=t.name)}),i},toCutType:function(e){this.selectType.map(function(t,a){t.isSelect=e==a})},selectFilter:function(e){this.curFilter==e?this.curFilter="":this.curFilter=e},toCloseFilterbox:function(){this.curFilter=""},toJumpLineDetail:function(t){var a=this;e.navigateTo({url:"/pages/lineDetail/lineDetail?id=".concat(a.lineList[t].rt_id)})},toGetLineCdi:function(){var e=this;this.$api.ajax({url:this.$config.lineCondition}).then(function(t){if(200==t.statusCode&&0==t.data.code){var a=t.data.data;e.lineType=a.cate_list,e.lineType.unshift({cate_id:"",cate_name:"全部分类"}),e.selectArea=a.area_list,void 0!==e.selectAreaId&&null!==e.selectAreaId&&e.selectArea.map(function(t,a){t.area_id===e.selectAreaId&&(e.areaPrtIdx=a,e.selectAreaName=t.area_name)})}else e.$api.warnNotice(t.data.message)}).catch(function(t){e.$api.warnNotice("条件加载失败")})},toSearchKeyword:function(e){this.paramsBlank(),this.keyword=e.detail.value,this.getDataList()},paramsBlank:function(){this.keyword="",this.lineTypeVal="",this.selectAreaId="",this.recomFilterVal="",this.selectDayVal="",this.area_type="",this.index=1},getDataList:function(){var e=this;this.$api.ajax({url:this.$config.lineList,data:{index:this.index,size:this.size,keyword:this.keyword,cate_id:this.lineTypeVal,area_id:this.selectAreaId,area_type:this.area_type,sort:this.recomFilterVal,day:this.selectDayVal}}).then(function(t){if(200==t.statusCode&&0==t.data.code){1==e.index&&(e.lineList=[]);var a=t.data.data;a.length<e.size?(e.lineList=e.lineList.concat(a),e.isMore=!1):(e.lineList=e.lineList.concat(a),e.index++),setTimeout(function(){e.isShowSkeleton=!1},200)}else 1==e.index?e.isLoadErr=!0:e.$api.warnNotice(t.data.message),e.isShowSkeleton=!1}).catch(function(t){1==e.index?e.isLoadErr=!0:e.$api.warnNotice("线路列表加载失败"),e.isShowSkeleton=!1})},toLoadMore:function(){this.isMore&&this.getDataList()},toRelaodData:function(){this.paramsBlank(),this.isShowSkeleton=!1,this.isLoadErr=!1,this.isMore=!0,this.getDataList()}}};t.default=s}).call(this,a("543d")["default"])},"52b5":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=(e._self._c,e.filteValChange(e.lineTypeVal,e.lineType,1)),i=e.filteValChange(e.recomFilterVal,e.recomFilter,2),n=e.filteValChange(e.selectDayVal,e.selectDay,4);e.$mp.data=Object.assign({},{$root:{m0:a,m1:i,m2:n}})},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},bf9f:function(e,t,a){"use strict";a.r(t);var i=a("4475"),n=a.n(i);for(var l in i)"default"!==l&&function(e){a.d(t,e,function(){return i[e]})}(l);t["default"]=n.a},cc96:function(e,t,a){},d497:function(e,t,a){"use strict";var i=a("cc96"),n=a.n(i);n.a}},[["3268","common/runtime","common/vendor"]]]);